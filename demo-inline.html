<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portfolio Demo (Inline)</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    const app = initializeApp({
      apiKey: "AIzaSyCejm0Ry18S1mlqYpnMRuIJGnQ-iDvu3EU",
      authDomain: "custom-messages-84ec4.firebaseapp.com",
      projectId: "custom-messages-84ec4",
      storageBucket: "custom-messages-84ec4.firebasestorage.app",
      messagingSenderId: "1079020496100",
      appId: "1:1079020496100:web:d21ec1428327515e3df8f1",
    });
    const db = getFirestore(app);
    window.firebaseDB = db;
    window.firebaseAddDoc = addDoc;
    window.firebaseCollection = collection;
    window.firebaseServerTimestamp = serverTimestamp;
    console.log("üî• Firebase initialized successfully (demo)!");
  </script>
  <style>body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);color:#1f2937;margin:0}nav{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:rgba(255,255,255,.9);backdrop-filter:blur(10px)}a{color:inherit;text-decoration:none;font-weight:600}ul{list-style:none;display:flex;gap:1rem;margin:0;padding:0}.theme-toggle-container{display:flex;align-items:center;gap:.5rem}.theme-slider{position:relative;width:50px;height:25px;background:#4ade80;border-radius:25px;cursor:pointer;border:2px solid #6366f1}.theme-slider.dark{background:#ef4444}.theme-slider::before{content:"";position:absolute;top:2px;left:2px;width:17px;height:17px;background:#fff;border-radius:50%;transition:transform .3s ease}.theme-slider.dark::before{transform:translateX(23px)}[data-theme=dark] body{background:linear-gradient(135deg,#0f172a,#111827)!important;color:#f8fafc}</style>
</head>
<body>
<nav>
  <div><a href="index-inline.html">‚Üê Back</a></div>
  <ul>
    <li>
      <div class="theme-toggle-container">
        <span class="light-label">Light</span>
        <div class="theme-slider" id="theme-slider"></div>
        <span class="dark-label">Dark</span>
      </div>
    </li>
  </ul>
</nav>
<main style="padding:2rem;max-width:900px;margin:0 auto">
  <h1>Inline Demo</h1>
  <p>This page shares the same dark/light toggle logic and Firebase setup, fully inline.</p>
  <section style="margin-top:2rem;background:rgba(255,255,255,.85);padding:1rem;border-radius:10px;color:#111" id="db-test">
    <h3>Quick DB Smoke Test</h3>
    <p>Click to add a tiny test doc to Firestore (collection: Messages-demo).</p>
    <button id="db-btn" style="padding:.6rem 1rem;border-radius:8px;border:none;background:#6366f1;color:#fff;font-weight:700;cursor:pointer">Add Test Doc</button>
    <p id="db-status" style="margin-top:1rem"></p>
  </section>
</main>
<script>
  // Theme toggle (same as main)
  function applyTheme(theme){ document.documentElement.setAttribute('data-theme',theme); const s=document.getElementById('theme-slider'); if(s){ s.classList.toggle('dark', theme==='dark'); } }
  const saved=localStorage.getItem('theme')||'light'; applyTheme(saved);
  document.getElementById('theme-slider').addEventListener('click',()=>{ const next=(document.documentElement.getAttribute('data-theme')||'light')==='dark'?'light':'dark'; localStorage.setItem('theme',next); applyTheme(next); });

  // DB test
  document.getElementById('db-btn').addEventListener('click', async ()=>{
    const el = document.getElementById('db-status');
    el.textContent = 'Writing...';
    try {
      await window.firebaseAddDoc(window.firebaseCollection(window.firebaseDB,'Messages-demo'), {
        when: new Date().toISOString(),
        serverTimestamp: window.firebaseServerTimestamp(),
        note: 'Inline demo test doc'
      });
      el.textContent = '‚úÖ Wrote a test document to Firestore!';
    } catch (e) {
      el.textContent = '‚ùå DB error: ' + e.message;
      console.error(e);
    }
  });
</script>
</body>
</html>
