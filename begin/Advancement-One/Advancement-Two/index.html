<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Advancement Two - Easter Hunt</title>
  <style>
    :root{--bg:#05122a;--card:#0b2b3f;--accent:#00d1ff;--text:#eaf6f3;--secondary:#8b5cf6}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#041b2a 0%,#042b3b 100%);color:var(--text);display:flex;align-items:center;justify-content:center;height:100vh;position:relative}
    .card{background:var(--card);padding:3rem;border-radius:14px;border:1px solid rgba(0,209,255,0.08);box-shadow:0 10px 30px rgba(0,0,0,0.5);text-align:center;max-width:720px;width:90%}
    h1{margin:0 0 1rem;font-size:2rem;color:var(--accent)}
    p{margin:0 0 1.5rem;opacity:0.9}
    .btn{background:linear-gradient(90deg,var(--accent),var(--secondary));border:none;padding:0.9rem 2rem;border-radius:999px;color:#001;cursor:pointer;font-weight:700;transition:transform 0.2s}
    .btn:hover{transform:translateY(-2px)}
    .btn:active{transform:translateY(1px)}
    .meta{margin-top:1rem;color:#9fe8ff;opacity:0.8;font-size:0.9rem}
    
    .auth-status{position:absolute;top:1.5rem;right:1.5rem;background:var(--card);border:1px solid rgba(0,209,255,0.3);border-radius:20px;padding:0.6rem 1.2rem;font-size:0.85rem;z-index:100}
    .auth-status.signed-in{border-color:var(--accent);color:var(--accent)}
    .auth-status.signed-out{opacity:0.6;color:#ffd23f}
    
    .hunt-progress{position:absolute;top:1.5rem;left:1.5rem;background:var(--card);border:1px solid rgba(139,92,246,0.3);border-radius:20px;padding:0.6rem 1.2rem;font-size:0.85rem;z-index:100;color:var(--secondary)}
  </style>
</head>
<body>
  <div class="auth-status" id="authStatus">Not signed in</div>
  <div class="hunt-progress" id="huntProgress" data-secret-path="Advancement-Three/index.html" title="Hover for intel">Level: Two</div>
  
  <div class="card">
    <h1>ðŸŽ¯ Advancement Two</h1>
    <p>Interesting, you've passed the first level... You're at least barely past beginner in my eyes. But Level 2? That's where things get spicy. Multiple paths ahead, but only one leads forward. Choose wisely.</p>
    
    <div style="display:flex;gap:0.75rem;flex-wrap:wrap;justify-content:center;margin-top:1.5rem;">
      <button class="btn" id="pathA">Path Alpha â†’</button>
      <button class="btn" id="pathB">Path Beta â†’</button>
      <button class="btn" id="pathC" style="background:linear-gradient(90deg,#ff6b6b,#ff8e53);">Path Gamma â†’</button>
    </div>
    
    <div class="meta">Progress: 2 / 4 | Hunt Level: Two | Paths: Multiple</div>
    
    <!-- Hidden real path - only visible on hover over the progress indicator -->
    <div id="secretHint" style="margin-top:1rem;opacity:0;transition:opacity 0.3s;font-size:0.85rem;color:#9fe8ff;">
      Hover the progress bar for advanced intel...
    </div>
  </div>
  
  <script type="module">
    // Firebase removed: local storage tracking
    const localDB = {
      events: JSON.parse(localStorage.getItem('local_events') || '{}'),
      progress: JSON.parse(localStorage.getItem('local_progress') || '{}'),
    };
    function persist(){
      localStorage.setItem('local_events', JSON.stringify(localDB.events));
      localStorage.setItem('local_progress', JSON.stringify(localDB.progress));
    }
    
  const USER_ID = 'anonymous';
    
    function generateSessionId() {
      return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }

    function updateAuthStatus() {
      const authStatus = document.getElementById('authStatus');
      authStatus.textContent = 'Local tracking';
      authStatus.className = 'auth-status signed-out';
    }

    async function trackProgress() {
      const uid = USER_ID;
      if (!localDB.progress[uid]) localDB.progress[uid] = [];
      localDB.progress[uid].push({ level: 'advancement-two', page: window.location.pathname, timestamp: Date.now(), sessionId: generateSessionId() });
      if (!localDB.events[uid]) localDB.events[uid] = [];
      localDB.events[uid].push({ type: 'advancement_reached', level: 'two', timestamp: Date.now(), sessionId: generateSessionId() });
      persist();
    }

    document.addEventListener('DOMContentLoaded', function() {
      updateAuthStatus();
      trackProgress();
      
      // Add hover effect to show secret hint
      const huntProgress = document.getElementById('huntProgress');
      const secretHint = document.getElementById('secretHint');
      
      huntProgress.addEventListener('mouseenter', () => {
        secretHint.style.opacity = '1';
        secretHint.innerHTML = 'Real path: Right-click the "Hunt Level: Two" text and inspect element. Look for the hidden data attribute.';
      });
      
      huntProgress.addEventListener('mouseleave', () => {
        secretHint.style.opacity = '0';
      });
    });

    // Path buttons - two go to dummy pages, one has the real clue
    document.getElementById('pathA').addEventListener('click', () => {
      window.location.href = 'index-fake.html';
    });
    
    document.getElementById('pathB').addEventListener('click', () => {
      window.location.href = 'index-html.html';
    });
    
    document.getElementById('pathC').addEventListener('click', () => {
      alert('Path Gamma is under construction. Try the other paths or look for hidden clues on this page.');
    });
  </script>
</body>
</html>
