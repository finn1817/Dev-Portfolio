<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Secret Vault ‚Äî Level 3</title>
  <style>
    :root{--bg:#0a1520;--card:#1a2530;--accent:#00d4aa;--text:#fff;--secondary:#ffd700}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:radial-gradient(circle at 30% 30%, rgba(0,212,170,0.1), transparent 50%), linear-gradient(180deg,#0a1520 0%,#1a2530 100%);color:var(--text);min-height:100vh;padding:2rem}
    .container{max-width:900px;margin:0 auto;background:linear-gradient(180deg,rgba(255,255,255,0.05),rgba(255,255,255,0.02));border-radius:20px;padding:3rem;border:2px solid rgba(0,212,170,0.2);box-shadow:0 20px 60px rgba(0,0,0,0.5)}
    
    h1{margin:0 0 1rem;font-size:2.5rem;color:var(--accent);text-align:center;text-shadow:0 0 20px rgba(0,212,170,0.5)}
    .subtitle{text-align:center;color:var(--secondary);margin-bottom:2rem;font-size:1.1rem}
    .stage-indicator{text-align:center;margin:1rem 0;color:var(--accent);font-weight:bold;font-size:1.2rem}
    
    .vault-interface{background:rgba(0,0,0,0.4);border:2px solid rgba(0,212,170,0.4);border-radius:15px;padding:2rem;margin:2rem 0;position:relative}
    .vault-header{text-align:center;color:var(--accent);font-size:1.3rem;margin-bottom:2rem;border-bottom:1px solid rgba(0,212,170,0.3);padding-bottom:1rem}
    
    .security-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin:2rem 0}
    .security-module{background:linear-gradient(135deg,rgba(0,212,170,0.1),rgba(255,215,0,0.1));border:1px solid rgba(0,212,170,0.3);border-radius:10px;padding:1.5rem;text-align:center;cursor:pointer;transition:all 0.3s ease}
    .security-module:hover{transform:translateY(-3px);border-color:var(--accent);box-shadow:0 10px 25px rgba(0,212,170,0.2)}
    .security-module.activated{border-color:var(--secondary);background:linear-gradient(135deg,rgba(255,215,0,0.2),rgba(0,212,170,0.1))}
    
    .vault-log{background:rgba(0,0,0,0.6);border:1px solid rgba(0,212,170,0.2);border-radius:10px;padding:1.5rem;margin:2rem 0;font-family:monospace;font-size:0.9rem;max-height:200px;overflow-y:auto}
    .log-line{margin:0.3rem 0;color:#00d4aa}
    .log-warning{color:#ffd700}
    .log-error{color:#ff6b6b}
    .log-success{color:#4ecdc4}
    
    .advancement-portal{text-align:center;margin:2rem 0;padding:2rem;background:linear-gradient(135deg,rgba(0,212,170,0.1),rgba(255,215,0,0.1));border-radius:15px;border:2px dashed rgba(0,212,170,0.4);display:none}
    .portal-btn{background:linear-gradient(90deg,var(--accent),var(--secondary));border:none;padding:1.2rem 2.5rem;border-radius:12px;color:#001;font-weight:800;cursor:pointer;font-size:1.1rem;box-shadow:0 10px 30px rgba(0,212,170,0.3)}
    
    .back-btn{display:inline-block;margin-top:2rem;background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--text);padding:0.8rem 1.5rem;border-radius:8px;text-decoration:none}
  </style>
</head>
<body>
  <div class="container">
    <h1>üîí Secret Vault</h1>
    <div class="subtitle">Welcome to the classified advancement vault. Security clearance required.</div>
    <div class="stage-indicator">ADVANCEMENT PROGRESS: Stage 1 of 3</div>
    
    <div class="vault-interface">
      <div class="vault-header">VAULT SECURITY SYSTEM v4.2.1</div>
      
      <div class="security-grid">
        <div class="security-module" onclick="activateModule(1)">
          <h3>üîê Biometric Scan</h3>
          <p>Initiate facial recognition protocol</p>
          <div id="status1">STANDBY</div>
        </div>
        
        <div class="security-module" onclick="activateModule(2)">
          <h3>üéØ Access Verification</h3>
          <p>Confirm advancement clearance</p>
          <div id="status2">STANDBY</div>
        </div>
        
        <div class="security-module" onclick="activateModule(3)">
          <h3>üóùÔ∏è Vault Unlock</h3>
          <p>Authorize level progression</p>
          <div id="status3">STANDBY</div>
        </div>
        
        <div class="security-module" onclick="activateModule(4)">
          <h3>üöÄ Portal Activation</h3>
          <p>Enable advancement gateway</p>
          <div id="status4">STANDBY</div>
        </div>
      </div>
    </div>
    
    <div class="vault-log" id="vaultLog">
      <div class="log-line">VAULT SYSTEM INITIALIZED</div>
      <div class="log-line">Security Level: MAXIMUM</div>
      <div class="log-line">User Access: GUEST</div>
      <div class="log-warning">WARNING: Stage 1 verification required</div>
      <div class="log-line">Awaiting security module activation...</div>
    </div>
    
    <div class="advancement-portal" id="advancementPortal">
      <h3>üåü Stage 1 Complete!</h3>
      <p>Vault security cleared. Ready for Stage 2 verification.</p>
      <button class="portal-btn" onclick="proceedToStage2()">Proceed to Stage 2</button>
    </div>
    
    <div style="text-align:center;">
      <a class="back-btn" href="index.html">‚Üê Return to Level Three</a>
    </div>
  </div>

  <script>
    let activatedModules = [];
    let stage = new URLSearchParams(window.location.search).get('stage') || '1';
    
    function addLog(message, className = 'log-line') {
      const log = document.getElementById('vaultLog');
      const line = document.createElement('div');
      line.className = className;
      line.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
      log.appendChild(line);
      log.scrollTop = log.scrollHeight;
    }
    
    function activateModule(moduleNum) {
      if (activatedModules.includes(moduleNum)) {
        addLog(`Module ${moduleNum} already activated.`, 'log-warning');
        return;
      }
      
      activatedModules.push(moduleNum);
      const module = document.querySelectorAll('.security-module')[moduleNum - 1];
      const status = document.getElementById(`status${moduleNum}`);
      
      module.classList.add('activated');
      
      switch(moduleNum) {
        case 1:
          status.textContent = 'SCANNING...';
          setTimeout(() => {
            status.textContent = 'AUTHORIZED';
            addLog('Biometric scan successful. User identity confirmed.', 'log-success');
          }, 2000);
          break;
          
        case 2:
          status.textContent = 'VERIFYING...';
          setTimeout(() => {
            status.textContent = 'CLEARED';
            addLog('Access verification complete. Advancement rights confirmed.', 'log-success');
          }, 1500);
          break;
          
        case 3:
          status.textContent = 'UNLOCKING...';
          setTimeout(() => {
            status.textContent = 'UNLOCKED';
            addLog('Vault unlock sequence initiated. Security barriers lowered.', 'log-success');
          }, 2500);
          break;
          
        case 4:
          status.textContent = 'ACTIVATING...';
          setTimeout(() => {
            status.textContent = 'ACTIVE';
            addLog('Portal activation successful. Stage 1 verification complete.', 'log-success');
            checkCompletion();
          }, 3000);
          break;
      }
    }
    
    function checkCompletion() {
      if (activatedModules.length === 4) {
        setTimeout(() => {
          addLog('ALL SYSTEMS OPERATIONAL', 'log-success');
          addLog('STAGE 1 VERIFICATION: COMPLETE', 'log-success');
          addLog('Advancement portal is now available.', 'log-success');
          
          document.getElementById('advancementPortal').style.display = 'block';
        }, 1000);
      }
    }
    
    function proceedToStage2() {
      addLog('Initiating Stage 2 transition...', 'log-line');
      addLog('Redirecting to map assembly...', 'log-line');
      
      setTimeout(() => {
        window.location.href = 'map-assembly.html?stage=1-complete';
      }, 2000);
    }
    
    // Handle different entry stages
    if (stage === '2') {
      document.querySelector('.stage-indicator').textContent = 'ADVANCEMENT PROGRESS: Returning from Stage 2';
      addLog('Stage 2 completion detected. Vault ready for Stage 3 preparation.', 'log-success');
      setTimeout(() => {
        addLog('SYSTEM: Proceed to debug-console.html for final stage.', 'log-warning');
      }, 3000);
    }
  </script>
</body>
</html>
